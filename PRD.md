# 製品要求仕様書 (PRD)

## 1. 製品概要

AWSのMFA（多要素認証）を利用した一時的な認証情報を簡単に取得するためのコマンドラインツール。
npx経由で実行でき、開発者が手軽に利用できることを目指す。

## 2. ターゲットユーザー

* AWSのAPIを日常的に利用する開発者
* MFA認証が必須な環境で作業する開発者

## 3. 機能要件

* AWS CLIの標準的な認証情報（`~/.aws/credentials`）を利用する。
* 複数のプロファイルが存在する場合、対話形式でプロファイルを選択できる。
* MFAデバイスが複数設定されている場合、対話形式で利用するデバイスを選択できる。
* MFAデバイスのシリアル番号（選択式または入力式）とトークンコードを対話形式で入力できる。
* 選択されたプロファイルの認証情報とMFA情報を用いてAWS STSの`getSessionToken` APIを呼び出し、一時的な認証情報を取得する。
* 取得した一時的な認証情報（アクセスキーID、シークレットアクセスキー、セッショントークン）を標準出力に表示する。

## 4. ユーザーシナリオ

1. 開発者がターミナルで `npx aws-mfa-credentials` を実行する。
2. （複数のAWSプロファイルが存在する場合）ツールが対話形式でプロファイルの選択を求める。
3. 開発者がプロファイルを選択する。
4. （MFAデバイスが複数設定されている場合）ツールが対話形式でMFAデバイスの選択を求める。
5. 開発者がMFAデバイスを選択する。
6. ツールが対話形式でMFAトークンコードの入力を求める。
7. 開発者がトークンコードを入力する。
8. ツールがAWSにリクエストを送信し、一時的な認証情報を取得する。
9. ツールが `export AWS_ACCESS_KEY_ID=...` のような形式で認証情報を標準出力に出力する。
10. 開発者は `eval $(npx aws-mfa-credentials)` のように実行して、現在のシェルセッションに認証情報を設定する。

## 5. 技術要件

* **言語:** TypeScript
* **実行環境:** Node.js
* **配布方法:** npm publishで公開し、npx経由での実行をサポートする。
